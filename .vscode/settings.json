{
  // Apply quick fixes and organize imports on save when available.
  // VS Code 1.85+: use "explicit" to opt-in to potentially slow actions.
  "editor.codeActionsOnSave": {
    "source.fixAll": "explicit",
    "source.organizeImports": "explicit"
  },
  // Also format on save using Dart's formatter.
  "editor.formatOnSave": true,
  // Dart-specific overrides (optional but explicit).
  "[dart]": {
    "editor.codeActionsOnSave": {
      "source.fixAll": "explicit",
      "source.organizeImports": "explicit"
    },
    "editor.formatOnSave": true
  },

  // Treat .arb files as JSON for formatting and basic quick fixes
  "files.associations": {
    "*.arb": "json"
  },
  "json.format.enable": true,
  "[json]": {
    "editor.formatOnSave": true,
    "editor.codeActionsOnSave": {
      "source.fixAll": "explicit"
    }
  },

  // Run ARB fixer automatically when saving any .arb file (mac/Linux)
  "emeraldwalk.runonsave": {
    "commands": [
      {
        "match": "\\.arb$",
        "cmd": "node ${workspaceFolder}/scripts/fix_arb_node.js"
      }
    ]
  },

  // Auto Run Command extension: run fixer on save for .arb files
  // If you installed 'Auto Run Command', this triggers on save.
  "auto-run-command.rules": [
    {
      "command": "node ${workspaceFolder}/scripts/fix_arb_node.js",
      "isShellCommand": true,
      "autoRun": "onSave",
      "fileMatch": "**/*.arb"
    }
  ]
}
